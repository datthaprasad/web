{"ast":null,"code":"import _regeneratorRuntime from\"D:/WEB_MINI_PROJECT/web/ReactJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/WEB_MINI_PROJECT/web/ReactJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/WEB_MINI_PROJECT/web/ReactJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useContext,useEffect,useState}from'react';import'./Login.css';import ErrorModel from'../UIelements/Error';import LoadingSpinner from'../UIelements/LoadingSpinner';import{useHttpClient}from'../Hooks/Http-Hook';import{Link,useHistory}from'react-router-dom';import{AuthContext}from'../Hooks/AuthContext';var Login=function Login(){useEffect(function(){document.body.style.background=\"url('https://www.myamcat.com/blog/wp-content/uploads/2016/02/graduation-hats.jpg') no-repeat center\";document.body.style.backgroundRepeat=\"no-repeat\";document.body.style.backgroundSize=\"cover\";document.body.style.backgroundPosition=\"center\";},[]);var auth=useContext(AuthContext);var history=useHistory();var _useState=useState(),_useState2=_slicedToArray(_useState,2),login_error=_useState2[0],seterror=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),header=_useState4[0],setHeader=_useState4[1];var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var loginHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return sendRequest(\"https://localhost:5000/login\",'POST',{'Content-Type':'application/json'},JSON.stringify({email:document.getElementById(\"email\").value,password:document.getElementById(\"password\").value,login:1}));case 4:data=_context.sent;if(data===\"user not found\"){seterror(\"You dont have valid Account, create one\");setHeader(\"Login Failed\");}else if(data===\"password is incorrect\"){seterror(\"Password is Incorrect\");setHeader(\"Login Failed\");}else if(data===\"login successfull\"){auth.LOGIN(document.getElementById(\"email\").value);history.push('/');}else{seterror(\"Something went wrong, please try again later\");setHeader(\"Something went wrong\");}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function loginHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(React.Fragment,{children:[login_error&&/*#__PURE__*/_jsx(ErrorModel,{header:header,error:login_error,onClear:function onClear(){seterror();}}),error&&/*#__PURE__*/_jsx(ErrorModel,{error:error,onClear:clearError}),isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/_jsxs(\"marquee\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"SRINIVAS INSTITUTE OF TECHNOLOGY,VALACHIL  \"}),\"ENGINEERS JOB PORTAL\"]}),!isLoading&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"textbox\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"text\",placeholder:\"Emial\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"textbox\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-lock\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",placeholder:\"Password\"})]}),/*#__PURE__*/_jsx(\"input\",{onClick:loginHandler,type:\"button\",className:\"btn\",value:\"Sign in\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Don't have an account?\",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:/*#__PURE__*/_jsx(\"a\",{className:\"btnx\",children:\"Signup\"})})]})]})})]});};export default Login;","map":{"version":3,"sources":["D:/WEB_MINI_PROJECT/web/ReactJS/src/routes/Login.js"],"names":["React","useContext","useEffect","useState","ErrorModel","LoadingSpinner","useHttpClient","Link","useHistory","AuthContext","Login","document","body","style","background","backgroundRepeat","backgroundSize","backgroundPosition","auth","history","login_error","seterror","header","setHeader","isLoading","error","sendRequest","clearError","loginHandler","event","preventDefault","JSON","stringify","email","getElementById","value","password","login","data","LOGIN","push","console","log"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport './Login.css';\r\n\r\nimport ErrorModel from '../UIelements/Error';\r\nimport LoadingSpinner from '../UIelements/LoadingSpinner'\r\nimport {useHttpClient} from '../Hooks/Http-Hook'\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { AuthContext } from '../Hooks/AuthContext';\r\n\r\n\r\nconst Login=()=>{\r\n    \r\n    \r\n  useEffect(()=>{\r\n    document.body.style.background= \"url('https://www.myamcat.com/blog/wp-content/uploads/2016/02/graduation-hats.jpg') no-repeat center\";\r\n    document.body.style.backgroundRepeat=\"no-repeat\";\r\n    document.body.style.backgroundSize=\"cover\";\r\n    document.body.style.backgroundPosition=\"center\";\r\n},[]);\r\n    const auth=useContext(AuthContext)\r\n    const history = useHistory();\r\n    const [login_error,seterror]=useState();\r\n    const [header,setHeader]=useState('');\r\n    const {isLoading,error,sendRequest,clearError}=useHttpClient();\r\n\r\n    const loginHandler=async (event)=>{\r\n        event.preventDefault();\r\n        let data;\r\n        try{\r\n        data= await sendRequest(\r\n            `https://localhost:5000/login`,\r\n            'POST',\r\n            {'Content-Type':'application/json'},\r\n            JSON.stringify({\r\n                    email:document.getElementById(\"email\").value,\r\n                    password:document.getElementById(\"password\").value,\r\n                    login:1\r\n            }));\r\n\r\n            if(data===\"user not found\"){\r\n                seterror(\"You dont have valid Account, create one\");\r\n                setHeader(\"Login Failed\")\r\n            }\r\n            else if(data===\"password is incorrect\"){\r\n                seterror(\"Password is Incorrect\")\r\n                setHeader(\"Login Failed\")\r\n            }\r\n            else if(data===\"login successfull\"){\r\n                auth.LOGIN(document.getElementById(\"email\").value)\r\n                history.push('/');\r\n            }\r\n            else{\r\n                seterror(\"Something went wrong, please try again later\")\r\n                setHeader(\"Something went wrong\")\r\n            }\r\n        }\r\n        catch(err){\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n\r\n    return(\r\n        \r\n        <React.Fragment >  \r\n            {/* {isLoading1 && <LoadingSpinner asOverlay/>} */}\r\n            {login_error && <ErrorModel header={header} error={login_error} onClear={()=>{seterror()}}/>}\r\n            {error && <ErrorModel error={error} onClear={clearError}/>}\r\n            {isLoading && <LoadingSpinner asOverlay/>}\r\n\r\n        <marquee>\r\n            <span>SRINIVAS INSTITUTE OF TECHNOLOGY,VALACHIL  </span>\r\n            ENGINEERS JOB PORTAL\r\n        </marquee>\r\n\r\n        {!isLoading && <div>\r\n        \r\n        <div className=\"login-box\">\r\n            <div className=\"textbox\">\r\n                <i className=\"fas fa-user\"/>\r\n                <input id=\"email\" type=\"text\" placeholder=\"Emial\"/>\r\n            </div>\r\n\r\n            <div className=\"textbox\">\r\n                <i className=\"fas fa-lock\"></i>\r\n                <input id=\"password\" type=\"password\" placeholder=\"Password\"/>\r\n            </div>\r\n\r\n        <input onClick={loginHandler} type=\"button\" className=\"btn\" value=\"Sign in\"/>\r\n        <h4>Don't have an account?<Link to='/signup'><a className='btnx'>Signup</a></Link></h4>\r\n        </div>\r\n        </div>}\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}