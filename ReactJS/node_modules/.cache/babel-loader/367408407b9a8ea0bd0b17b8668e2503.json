{"ast":null,"code":"import _regeneratorRuntime from\"D:/WEB_MINI_PROJECT/web/ReactJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/WEB_MINI_PROJECT/web/ReactJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/WEB_MINI_PROJECT/web/ReactJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useContext,useEffect,useState}from'react';import{AuthContext}from'../Hooks/AuthContext';import LoadingSpinner from'../UIelements/LoadingSpinner';import{useHttpClient}from\"../Hooks/Http-Hook\";import\"./Drive.css\";import DriveList from\"./DriveList\";import ErrorModal from'../UIelements/Error';import{useHistory}from'react-router-dom';var Drive=function Drive(){var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var auth=useContext(AuthContext);var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),list=_useState2[0],setList=_useState2[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:document.body.style.background=\"none\";_context.prev=1;_context.next=4;return sendRequest(\"https://job-portal-sit.herokuapp.com/drive\");case 4:data=_context.sent;console.log(data);setList(data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(\"drive error\\n\"+_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);})),[]);var form=function form(){history.push('/form-drive');};return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{children:[error&&/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),!auth.isLogedIn&&/*#__PURE__*/_jsx(\"h1\",{style:{paddingTop:\"20%\",textAlign:\"center\"},children:\" You dont have permission without login\"}),auth.isLogedIn&&/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:\"6%\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"DRIVES YOU WANT\"}),auth.isAdmin&&/*#__PURE__*/_jsx(\"button\",{className:\"tn1\",onClick:form,children:\"Add New Drive\"}),/*#__PURE__*/_jsx(DriveList,{items:list})]})]})});};export default Drive;","map":{"version":3,"sources":["D:/WEB_MINI_PROJECT/web/ReactJS/src/routes/Drive.js"],"names":["React","useContext","useEffect","useState","AuthContext","LoadingSpinner","useHttpClient","DriveList","ErrorModal","useHistory","Drive","isLoading","error","sendRequest","clearError","auth","history","list","setList","document","body","style","background","data","console","log","form","push","isLogedIn","paddingTop","textAlign","isAdmin"],"mappings":"uhBAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,OAASC,WAAT,KAA4B,sBAA5B,CACA,MAAOC,CAAAA,cAAP,KAA2B,8BAA3B,CACA,OAASC,aAAT,KAA8B,oBAA9B,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,qBAAvB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,GAAMC,CAAAA,KAAK,CAAC,QAANA,CAAAA,KAAM,EAAI,oBACmCJ,aAAa,EADhD,CACLK,SADK,gBACLA,SADK,CACKC,KADL,gBACKA,KADL,CACWC,WADX,gBACWA,WADX,CACuBC,UADvB,gBACuBA,UADvB,CAEZ,GAAMC,CAAAA,IAAI,CAACd,UAAU,CAACG,WAAD,CAArB,CACA,GAAMY,CAAAA,OAAO,CAACP,UAAU,EAAxB,CAHY,cAISN,QAAQ,CAAC,EAAD,CAJjB,wCAILc,IAJK,eAIAC,OAJA,eAMZhB,SAAS,sEAAC,4IACNiB,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,UAApB,CAA+B,MAA/B,CADM,sCAGeT,CAAAA,WAAW,8CAH1B,QAGIU,IAHJ,eAMHC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAL,OAAO,CAACK,IAAD,CAAP,CAPG,+EAUHC,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAVG,oEAAD,GAYP,EAZO,CAAT,CAeA,GAAMC,CAAAA,IAAI,CAAC,QAALA,CAAAA,IAAK,EAAI,CACXV,OAAO,CAACW,IAAR,CAAa,aAAb,EACH,CAFD,CAMA,mBACI,KAAC,KAAD,CAAO,QAAP,wBACA,uBACCf,KAAK,eAAI,KAAC,UAAD,EAAY,KAAK,CAAEA,KAAnB,CAA0B,OAAO,CAAEE,UAAnC,EADV,CAECH,SAAS,eAAI,KAAC,cAAD,EAAgB,SAAS,KAAzB,EAFd,CAGC,CAACI,IAAI,CAACa,SAAN,eAAmB,WAAI,KAAK,CAAE,CAACC,UAAU,CAAC,KAAZ,CAAkBC,SAAS,CAAC,QAA5B,CAAX,qDAHpB,CAICf,IAAI,CAACa,SAAL,eAAkB,aAAK,KAAK,CAAE,CAACC,UAAU,CAAC,IAAZ,CAAZ,wBACnB,uCADmB,CAElBd,IAAI,CAACgB,OAAL,eAAgB,eAAQ,SAAS,CAAC,KAAlB,CAAwB,OAAO,CAAEL,IAAjC,2BAFE,cAGf,KAAC,SAAD,EAAW,KAAK,CAAET,IAAlB,EAHe,GAJnB,GADA,EADJ,CAeH,CA1CD,CA4CA,cAAeP,CAAAA,KAAf","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\r\nimport { AuthContext } from '../Hooks/AuthContext';\r\nimport LoadingSpinner from '../UIelements/LoadingSpinner';\r\nimport { useHttpClient } from \"../Hooks/Http-Hook\";\r\nimport \"./Drive.css\"\r\nimport DriveList from \"./DriveList\";\r\nimport ErrorModal from '../UIelements/Error';\r\nimport { useHistory } from 'react-router-dom';\r\nconst Drive=()=>{\r\n    const {isLoading,error,sendRequest,clearError}=useHttpClient();\r\n    const auth=useContext(AuthContext);\r\n    const history=useHistory();\r\n    const [list,setList]=useState([]);\r\n\r\n    useEffect(async()=>{\r\n        document.body.style.background=\"none\";\r\n        try{\r\n            const data=await sendRequest(\r\n               `https://job-portal-sit.herokuapp.com/drive`\r\n               );\r\n           console.log(data);\r\n           setList(data);\r\n       }\r\n       catch(err){\r\n           console.log(\"drive error\\n\"+err);\r\n       }\r\n    },[])\r\n    \r\n\r\n    const form=()=>{\r\n        history.push('/form-drive');\r\n    } \r\n\r\n   \r\n    \r\n    return(\r\n        <React.Fragment>\r\n        <div>\r\n        {error && <ErrorModal error={error} onClear={clearError}/>}\r\n        {isLoading && <LoadingSpinner asOverlay/>}\r\n        {!auth.isLogedIn && <h1 style={{paddingTop:\"20%\",textAlign:\"center\"}}> You dont have permission without login</h1>}\r\n        {auth.isLogedIn && <div style={{paddingTop:\"6%\"}}>\r\n        <h1>DRIVES YOU WANT</h1>\r\n        {auth.isAdmin && <button className=\"tn1\" onClick={form}>Add New Drive</button>}   \r\n            <DriveList items={list}/>\r\n        </div>}\r\n        </div>\r\n        </React.Fragment>\r\n\r\n    );\r\n}\r\n\r\nexport default Drive;"]},"metadata":{},"sourceType":"module"}