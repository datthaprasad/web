{"ast":null,"code":"import _regeneratorRuntime from\"D:/WEB_MINI_PROJECT/web/ReactJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/WEB_MINI_PROJECT/web/ReactJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/WEB_MINI_PROJECT/web/ReactJS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useCallback,useRef,useEffect}from'react';export var useHttpClient=function useHttpClient(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var activeHttpRequests=useRef([]);var sendRequest=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var method,headers,body,httpAbortCtrl,response,responseData,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:'GET';headers=_args.length>2&&_args[2]!==undefined?_args[2]:{};body=_args.length>3&&_args[3]!==undefined?_args[3]:null;setIsLoading(true);httpAbortCtrl=new AbortController();activeHttpRequests.current.push(httpAbortCtrl);_context.prev=6;_context.next=9;return fetch(url,{method:method,body:body,headers:headers,signal:httpAbortCtrl.signal});case 9:response=_context.sent;_context.next=12;return response.json();case 12:responseData=_context.sent;activeHttpRequests.current=activeHttpRequests.current.filter(function(reqCtrl){return reqCtrl!==httpAbortCtrl;});if(response.ok){_context.next=16;break;}throw new Error(responseData.message);case 16:setIsLoading(false);return _context.abrupt(\"return\",responseData);case 20:_context.prev=20;_context.t0=_context[\"catch\"](6);console.log('dps'+_context.t0);setError('Please provide valid email');setIsLoading(false);throw _context.t0;case 26:case\"end\":return _context.stop();}}},_callee,null,[[6,20]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);var clearError=function clearError(){setError(null);};useEffect(function(){return function(){// eslint-disable-next-line react-hooks/exhaustive-deps\nactiveHttpRequests.current.forEach(function(abortCtrl){return abortCtrl.abort();});};},[]);return{isLoading:isLoading,error:error,sendRequest:sendRequest,clearError:clearError};};","map":{"version":3,"sources":["D:/WEB_MINI_PROJECT/web/ReactJS/src/Hooks/Http-Hook.js"],"names":["useState","useCallback","useRef","useEffect","useHttpClient","isLoading","setIsLoading","error","setError","activeHttpRequests","sendRequest","url","method","headers","body","httpAbortCtrl","AbortController","current","push","fetch","signal","response","json","responseData","filter","reqCtrl","ok","Error","message","console","log","clearError","forEach","abortCtrl","abort"],"mappings":"+bAAA,OAASA,QAAT,CAAmBC,WAAnB,CAAgCC,MAAhC,CAAwCC,SAAxC,KAAyD,OAAzD,CAEA,MAAO,IAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,eACCJ,QAAQ,CAAC,KAAD,CADT,wCAC1BK,SAD0B,eACfC,YADe,8BAEPN,QAAQ,EAFD,yCAE1BO,KAF0B,eAEnBC,QAFmB,eAIjC,GAAMC,CAAAA,kBAAkB,CAAGP,MAAM,CAAC,EAAD,CAAjC,CAEA,GAAMQ,CAAAA,WAAW,CAAGT,WAAW,0FAC7B,iBAAOU,GAAP,8LAAYC,MAAZ,+CAAqB,KAArB,CAA4BC,OAA5B,+CAAsC,EAAtC,CAA0CC,IAA1C,+CAAiD,IAAjD,CACER,YAAY,CAAC,IAAD,CAAZ,CAEMS,aAHR,CAGwB,GAAIC,CAAAA,eAAJ,EAHxB,CAIEP,kBAAkB,CAACQ,OAAnB,CAA2BC,IAA3B,CAAgCH,aAAhC,EAJF,sCAO2BI,CAAAA,KAAK,CAACR,GAAD,CAAM,CAChCC,MAAM,CAANA,MADgC,CAEhCE,IAAI,CAAJA,IAFgC,CAGhCD,OAAO,CAAPA,OAHgC,CAIhCO,MAAM,CAAEL,aAAa,CAACK,MAJU,CAAN,CAPhC,QAOUC,QAPV,sCAc+BA,CAAAA,QAAQ,CAACC,IAAT,EAd/B,SAcUC,YAdV,eAgBId,kBAAkB,CAACQ,OAAnB,CAA6BR,kBAAkB,CAACQ,OAAnB,CAA2BO,MAA3B,CAC3B,SAAAC,OAAO,QAAIA,CAAAA,OAAO,GAAKV,aAAhB,EADoB,CAA7B,CAhBJ,GAoBSM,QAAQ,CAACK,EApBlB,+BAqBY,IAAIC,CAAAA,KAAJ,CAAUJ,YAAY,CAACK,OAAvB,CArBZ,SAwBItB,YAAY,CAAC,KAAD,CAAZ,CAxBJ,gCAyBWiB,YAzBX,4DA2BIM,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAEAtB,QAAQ,CAAC,4BAAD,CAAR,CACAF,YAAY,CAAC,KAAD,CAAZ,CA9BJ,uFAD6B,+DAmC7B,EAnC6B,CAA/B,CAsCA,GAAMyB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBvB,QAAQ,CAAC,IAAD,CAAR,CACD,CAFD,CAIAL,SAAS,CAAC,UAAM,CACd,MAAO,WAAM,CACX;AACAM,kBAAkB,CAACQ,OAAnB,CAA2Be,OAA3B,CAAmC,SAAAC,SAAS,QAAIA,CAAAA,SAAS,CAACC,KAAV,EAAJ,EAA5C,EACD,CAHD,CAID,CALQ,CAKN,EALM,CAAT,CAOA,MAAO,CAAE7B,SAAS,CAATA,SAAF,CAAaE,KAAK,CAALA,KAAb,CAAoBG,WAAW,CAAXA,WAApB,CAAiCqB,UAAU,CAAVA,UAAjC,CAAP,CACD,CAxDM","sourcesContent":["import { useState, useCallback, useRef, useEffect } from 'react';\r\n\r\nexport const useHttpClient = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState();\r\n\r\n  const activeHttpRequests = useRef([]);\r\n\r\n  const sendRequest = useCallback(\r\n    async (url, method = 'GET', headers = {}, body = null) => {\r\n      setIsLoading(true);\r\n      \r\n      const httpAbortCtrl = new AbortController();\r\n      activeHttpRequests.current.push(httpAbortCtrl);\r\n\r\n      try {\r\n        const response = await fetch(url, {\r\n          method,\r\n          body,\r\n          headers,\r\n          signal: httpAbortCtrl.signal\r\n        });\r\n\r\n        const responseData = await response.json();\r\n\r\n        activeHttpRequests.current = activeHttpRequests.current.filter(\r\n          reqCtrl => reqCtrl !== httpAbortCtrl\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(responseData.message);\r\n        }\r\n\r\n        setIsLoading(false);\r\n        return responseData;\r\n      } catch (err) {\r\n        console.log('dps'+err);\r\n        \r\n        setError('Please provide valid email');\r\n        setIsLoading(false);\r\n        throw err;\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const clearError = () => {\r\n    setError(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      activeHttpRequests.current.forEach(abortCtrl => abortCtrl.abort());\r\n    };\r\n  }, []);\r\n\r\n  return { isLoading, error, sendRequest, clearError };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}